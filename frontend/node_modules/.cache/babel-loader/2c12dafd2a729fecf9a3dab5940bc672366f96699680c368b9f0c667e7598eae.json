{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\JATTIN\\\\OneDrive\\\\Desktop\\\\p2p-chat\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n// App.js (Frontend)\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport io from \"socket.io-client\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io(\"http://localhost:5000\");\nfunction App() {\n  _s();\n  const [email, setEmail] = useState(\"\");\n  const [mobile, setMobile] = useState(\"\");\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [recipientEmail, setRecipientEmail] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [chat, setChat] = useState([]);\n  const [users, setUsers] = useState([]); // State to store registered users\n\n  // Fetch registered users from the backend\n  useEffect(() => {\n    axios.get(\"http://localhost:5000/users\").then(response => {\n      setUsers(response.data.users);\n    }).catch(error => {\n      console.error(\"Error fetching users:\", error);\n    });\n  }, []);\n\n  // Register user\n  const register = async () => {\n    try {\n      await axios.post(\"http://localhost:5000/register\", {\n        email,\n        mobile\n      });\n      alert(\"Registration successful\");\n      // Refresh the list of users after registration\n      const response = await axios.get(\"http://localhost:5000/users\");\n      setUsers(response.data.users);\n    } catch (error) {\n      alert(\"Registration failed\");\n    }\n  };\n\n  // Login user\n  const login = () => {\n    if (users.includes(email)) {\n      setLoggedIn(true);\n      socket.emit(\"authenticate\", email);\n    } else {\n      alert(\"User not found\");\n    }\n  };\n\n  // Send message\n  const sendMessage = () => {\n    if (recipientEmail && message) {\n      socket.emit(\"sendMessage\", {\n        recipientEmail,\n        senderEmail: email,\n        message\n      });\n      setChat([...chat, {\n        senderEmail: email,\n        message,\n        timestamp: new Date()\n      }]);\n      setMessage(\"\");\n    }\n  };\n\n  // Receive messages\n  useEffect(() => {\n    socket.on(\"message\", msg => {\n      setChat(prevChat => [...prevChat, msg]);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: !loggedIn ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        placeholder: \"Email\",\n        value: email,\n        onChange: e => setEmail(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Mobile\",\n        value: mobile,\n        onChange: e => setMobile(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: register,\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        placeholder: \"Email\",\n        value: email,\n        onChange: e => setEmail(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: login,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        placeholder: \"Recipient Email\",\n        value: recipientEmail,\n        onChange: e => setRecipientEmail(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Message\",\n        value: message,\n        onChange: e => setMessage(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: sendMessage,\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: chat.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [msg.senderEmail, \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 17\n          }, this), \" \", msg.message, \" \", /*#__PURE__*/_jsxDEV(\"em\", {\n            children: [\"(\", new Date(msg.timestamp).toLocaleTimeString(), \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 67\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"vKuka610bu6oRPmlLSzGD/VSKJo=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","axios","io","jsxDEV","_jsxDEV","socket","App","_s","email","setEmail","mobile","setMobile","loggedIn","setLoggedIn","recipientEmail","setRecipientEmail","message","setMessage","chat","setChat","users","setUsers","get","then","response","data","catch","error","console","register","post","alert","login","includes","emit","sendMessage","senderEmail","timestamp","Date","on","msg","prevChat","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","onClick","map","index","toLocaleTimeString","_c","$RefreshReg$"],"sources":["C:/Users/JATTIN/OneDrive/Desktop/p2p-chat/frontend/src/App.js"],"sourcesContent":["// App.js (Frontend)\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport io from \"socket.io-client\";\n\nconst socket = io(\"http://localhost:5000\");\n\nfunction App() {\n  const [email, setEmail] = useState(\"\");\n  const [mobile, setMobile] = useState(\"\");\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [recipientEmail, setRecipientEmail] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [chat, setChat] = useState([]);\n  const [users, setUsers] = useState([]); // State to store registered users\n\n  // Fetch registered users from the backend\n  useEffect(() => {\n    axios.get(\"http://localhost:5000/users\")\n      .then((response) => {\n        setUsers(response.data.users);\n      })\n      .catch((error) => {\n        console.error(\"Error fetching users:\", error);\n      });\n  }, []);\n\n  // Register user\n  const register = async () => {\n    try {\n      await axios.post(\"http://localhost:5000/register\", { email, mobile });\n      alert(\"Registration successful\");\n      // Refresh the list of users after registration\n      const response = await axios.get(\"http://localhost:5000/users\");\n      setUsers(response.data.users);\n    } catch (error) {\n      alert(\"Registration failed\");\n    }\n  };\n\n  // Login user\n  const login = () => {\n    if (users.includes(email)) {\n      setLoggedIn(true);\n      socket.emit(\"authenticate\", email);\n    } else {\n      alert(\"User not found\");\n    }\n  };\n\n  // Send message\n  const sendMessage = () => {\n    if (recipientEmail && message) {\n      socket.emit(\"sendMessage\", { recipientEmail, senderEmail: email, message });\n      setChat([...chat, { senderEmail: email, message, timestamp: new Date() }]);\n      setMessage(\"\");\n    }\n  };\n\n  // Receive messages\n  useEffect(() => {\n    socket.on(\"message\", (msg) => {\n      setChat((prevChat) => [...prevChat, msg]);\n    });\n  }, []);\n\n  return (\n    <div>\n      {!loggedIn ? (\n        <div>\n          <h1>Register</h1>\n          <input type=\"email\" placeholder=\"Email\" value={email} onChange={(e) => setEmail(e.target.value)} />\n          <input type=\"text\" placeholder=\"Mobile\" value={mobile} onChange={(e) => setMobile(e.target.value)} />\n          <button onClick={register}>Register</button>\n\n          <h1>Login</h1>\n          <input type=\"email\" placeholder=\"Email\" value={email} onChange={(e) => setEmail(e.target.value)} />\n          <button onClick={login}>Login</button>\n        </div>\n      ) : (\n        <div>\n          <h1>Chat</h1>\n          <input type=\"email\" placeholder=\"Recipient Email\" value={recipientEmail} onChange={(e) => setRecipientEmail(e.target.value)} />\n          <input type=\"text\" placeholder=\"Message\" value={message} onChange={(e) => setMessage(e.target.value)} />\n          <button onClick={sendMessage}>Send</button>\n\n          <div>\n            {chat.map((msg, index) => (\n              <div key={index}>\n                <strong>{msg.senderEmail}:</strong> {msg.message} <em>({new Date(msg.timestamp).toLocaleTimeString()})</em>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}